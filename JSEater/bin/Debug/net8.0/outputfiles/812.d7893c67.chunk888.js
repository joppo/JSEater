"use strict";(self.webpackChunkresearcher_portal=self.webpackChunkresearcher_portal||[]).push([[812,547],{22547:function(e,i,t){t.r(i),t.d(i,{MarkdownViewer:function(){return c}});var n=t(80184),o=t(45806),r=t(40434),a=t(88456),s=function(e){var i=e.fonts,t=i.medium,n=i.mediumPlus,o=i.large,r=i.xLarge,s=e.palette,d=e.semanticColors,l={border:"1px solid",borderColor:d.variantBorder,borderRadius:"4px",fontFamily:"Consolas, monospace",fontSize:".8em",fontWeight:"400"};return Object.assign(Object.assign({},t),{a:{textDecoration:"underline"},h1:r,h2:Object.assign(Object.assign({},o),{fontWeight:a.lq.semibold}),h3:Object.assign(Object.assign({},o),{fontWeight:a.lq.regular}),h4:Object.assign(Object.assign({},n),{fontWeight:a.lq.bold}),h5:Object.assign(Object.assign({},n),{fontWeight:a.lq.semibold}),h6:Object.assign(Object.assign({},n),{fontWeight:a.lq.regular}),"h1, h2, h3, h4, h5, h6, ol, ul, p, table":{margin:"0 0 1rem"},strong:{fontWeight:a.lq.bold},em:{fontStyle:"italic"},ul:{listStyle:"disc",paddingLeft:"30px"},ol:{listStyle:"decimal",paddingLeft:"30px"},li:{marginBottom:".3em"},".code-inline":Object.assign(Object.assign({},l),{backgroundColor:d.bodyStandoutBackground,display:"inline",padding:".1rem .2rem"}),".code-block":Object.assign(Object.assign({},l),{display:"block",margin:"0 0 1rem",overflowX:"auto",padding:"0 1.2em"}),blockquote:{borderLeft:"5px solid ".concat(s.themeLight),fontStyle:"italic",margin:"1em 0",paddingLeft:"1em"},"td, th":{padding:".75em",textAlign:"left"}})},d=t(63044),l=t(67571),c=function(e){var i=e.children,t=(0,r.BV)().theme;return i?(0,n.jsx)(o.ML,{className:t?(0,a.y0)(s(t)):void 0,readOnly:!0,renderMark:l.I,renderNode:l.$,value:(0,d.kq)(i)}):null}},26930:function(e,i,t){t.r(i),t.d(i,{ProgressTimelineItem:function(){return v}});var n=t(80184),o=t(28627),r=t(96123),a=t(18511),s=t(77291),d=t(30910),l=t(77726),c=t(39520),u=t(40434),v=function(e){var i=e.date,t=e.iconName,v=void 0===t?"TimelineProgress":t,m=e.isDataLoaded,g=e.message,p=e.messageType,h=(0,l.p)(),f=(0,u.BV)().theme;return(0,n.jsx)(o.l,{activityDescription:(0,n.jsx)(r.q,Object.assign({isDataLoaded:m,styles:{root:{fontSize:"inherit"},shimmerWrapper:{height:14,maxWidth:300}}},{children:g.map((function(e,i){var t=e.isBold,o=e.text;return(0,n.jsxs)(d.w,Object.assign({isBold:t,messageType:p},{children:[o," "]}),i)}))})),activityIcon:(0,n.jsx)(a.J,{iconName:m?v:"CircleFill",style:{color:p===s.f.error?null===f||void 0===f?void 0:f.semanticColors.errorIcon:null===f||void 0===f?void 0:f.semanticColors.infoIcon}}),styles:h,timeStamp:(0,n.jsx)(r.q,Object.assign({isDataLoaded:m,styles:{root:{fontSize:"inherit"},shimmerWrapper:{height:13}},width:75},{children:(0,c.MZ)(i)}))})}},31371:function(e,i,t){t.r(i),t.d(i,{ReportCreatedTimelineItem:function(){return c}});var n=t(80184),o=t(28627),r=t(96123),a=t(30910),s=t(77726),d=t(40434),l=t(39520),c=function(e){var i=e.author,t=i.imageUrl,c=i.initials,u=void 0===c?" ":c,v=i.name,m=e.date,g=e.isDataLoaded,p=(0,s.p)(),h=(0,d.BV)().theme;return(0,n.jsx)(o.l,{activityDescription:(0,n.jsx)(r.q,Object.assign({isDataLoaded:g,styles:{root:{fontSize:"inherit"},shimmerWrapper:{height:15}},width:175},{children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.w,Object.assign({isBold:!0},{children:v}))," created this report."]}):(0,n.jsx)(n.Fragment,{children:"Report created."})})),activityPersonas:[Object.assign(Object.assign({},g&&{imageUrl:t}),{coinSize:16,imageInitials:g?u:" ",initialsColor:g?"#CCE0FF":null===h||void 0===h?void 0:h.palette.neutralLighter,initialsTextColor:"#111"})],styles:Object.assign(Object.assign({},p),{activityTypeIcon:{marginTop:0}}),timeStamp:(0,n.jsx)(r.q,Object.assign({isDataLoaded:g,styles:{root:{fontSize:"inherit"},shimmerWrapper:{height:13,marginTop:"4px"}},width:75},{children:(0,l.MZ)(m)}))})}},66312:function(e,i,t){t.r(i),t.d(i,{ReportDescriptionTimelineItem:function(){return f}});var n=t(80184),o=t(28627),r=t(96123),a=t(18511),s=t(22547),d=t(30910),l=t(40434),c=t(77726),u=["75%","80%","79%","81%","80%"],v=function(e){var i=e.isDataLoaded,t=(0,l.BV)().theme;return(0,n.jsx)(n.Fragment,{children:u.map((function(e,o){return(0,n.jsx)(r.q,{isDataLoaded:i,shimmerColors:{shimmer:null===t||void 0===t?void 0:t.palette.neutralLight,shimmerWave:null===t||void 0===t?void 0:t.palette.neutralQuaternary},style:{padding:".25em 0"},width:e},o)}))})},m=t(29439),g=t(72791),p=t(54794),h=function(e){var i=e.truncateComponent,t=e.children,o=e.labelNameSeeMore,r=void 0===o?"See more":o,a=e.labelNameSeeLess,s=void 0===a?"See less":a,d=e["aria-label"],l=(0,g.useState)(!1),c=(0,m.Z)(l,2),u=c[0],v=c[1],h=u?s:r,f="".concat(d," ").concat(h).trimStart();return(0,n.jsxs)("div",Object.assign({"aria-expanded":u},{children:[u?t:i,(0,n.jsx)(p.K,Object.assign({iconProps:{iconName:u?"ChevronUp":"ChevronDown"},onClick:function(){return v(!u)},"aria-label":f},{children:h}))]}))},f=function(e){var i=e.abstract,t=e.callstack,u=e.description,m=e.reproductionSteps,g=e.isDataLoaded,p=(0,c.p)(),f=(0,l.BV)().theme;return(0,n.jsx)(o.l,{activityDescription:(0,n.jsxs)("div",Object.assign({style:{backgroundColor:null===f||void 0===f?void 0:f.palette.neutralLighter,borderRadius:"3px",padding:"1rem 16px 1px"}},{children:[(0,n.jsx)(d.w,Object.assign({isBold:!0},{children:i?"Abstract":"Description"})),(0,n.jsx)(r.q,Object.assign({customElementsGroup:(0,n.jsx)(v,{isDataLoaded:g}),isDataLoaded:g,styles:{shimmerWrapper:{marginBottom:"1rem"}}},{children:(0,n.jsxs)(h,Object.assign({truncateComponent:(0,n.jsx)(s.MarkdownViewer,{children:i||u||m})},{children:[(0,n.jsx)(s.MarkdownViewer,{children:i}),m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.w,Object.assign({isBold:!0,isBlock:!0},{children:"Reproduction steps"})),(0,n.jsx)(s.MarkdownViewer,{children:m})]}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.w,Object.assign({isBold:!0,isBlock:!0},{children:"Description"})),(0,n.jsx)(s.MarkdownViewer,{children:u})]}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.w,Object.assign({isBold:!0,isBlock:!0},{children:"Callstack"})),(0,n.jsx)(s.MarkdownViewer,{children:t})]}),(0,n.jsx)("br",{})]}))}))]})),activityIcon:(0,n.jsx)(a.J,{iconName:"TextDocument",styles:{root:{alignItems:"center",backgroundColor:null===f||void 0===f?void 0:f.palette.themePrimary,borderRadius:"100%",color:"#fff",display:"flex",fontSize:"18px",height:c.E,justifyContent:"center",width:c.E}}}),styles:p})}},6812:function(e,i,t){t.r(i),t.d(i,{VulnReportTimeline:function(){return ce}});var n=t(80184),o=t(96123),r=t(26906),a=t(46790),s=t(9951),d=t(6975),l=t(33084),c=t(59332),u=t(27631),v=t(77291),m=function(e){var i,t,o=e.convoListError,r=e.vulnReportError;return o||r?401===(null===(i=null===o||void 0===o?void 0:o.response)||void 0===i?void 0:i.status)||401===(null===(t=null===r||void 0===r?void 0:r.response)||void 0===t?void 0:t.status)?(0,n.jsx)(u.c,Object.assign({messageBarType:v.f.blocked},{children:"You aren\u2019t signed in!"})):(0,n.jsxs)(u.c,Object.assign({messageBarType:v.f.error},{children:[!!r&&"Error getting vuln report data. ",!!o&&"Error getting conversation data. "]})):null},g=t(77771),p=t(3722),h=t(93441),f=t(72791),b=t(61134),j=t(40434),x=function(e){var i=e.error,t=e.formErrors;return i?(0,n.jsxs)(u.c,Object.assign({messageBarType:v.f.error},{children:[i.message,(null===t||void 0===t?void 0:t.reply)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),t.reply.message]})]})):null},y=t(97776),k=t(60461),L=function(e){var i,t=e.isLoading,o=(0,b.Gc)(),r=o.setValue,a=o.watch;(0,o.register)("topic");var s=a().topic,d=s&&(null===(i=k.Go[s])||void 0===i?void 0:i.displayName)||"No topic",l=function(e,i){i&&r("topic",(null===i||void 0===i?void 0:i.value)||void 0)},c=(0,k.A0)(k.Go,l);return(0,n.jsx)(y.X,{styles:{root:{background:"none",padding:"0px 0px 0px 6px"}},items:[{key:"topic",disabled:t,text:d,subMenuProps:{items:c,onItemClick:l},title:"Topic of your message (optional)",ariaLabel:"Topic of your message (optional), ".concat(d),ariaDescription:"This allows you to set a topic for your message,               which helps MSRC get back to you faster."}],farItems:[O(t)]})},O=function(e){return{key:"submit",disabled:e,iconOnly:!0,iconProps:{iconName:"Send",styles:{root:{marginRight:"0px",marginLeft:"8px",fontWeight:e?"bold":"normal"}}},buttonStyles:{flexContainer:{justifyContent:"flex-end"}},type:"submit",title:e?"Sending...":"Send"}},w=t(56487),C=t(763),S=function(e){var i=e.isLoading,t=(0,b.Gc)().control;return(0,n.jsx)(b.Qr,{name:"reply",control:t,rules:{required:!0,minLength:1},defaultValue:"",render:function(e){var t=e.field,o=t.onChange,r=t.value,a=-1!==r.indexOf("\n");return(0,n.jsx)(w.n,{disabled:i,placeholder:"Type a new message",title:"Reply",seamless:!0,onKeyDown:function(e){var i,t;a||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),null===(t=null===(i=e.currentTarget)||void 0===i?void 0:i.form)||void 0===t||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))},onChange:function(e,i){var t,n;(0,C.endsWith)(i,"\n\n\n")?null===(n=null===(t=e.currentTarget)||void 0===t?void 0:t.form)||void 0===n||n.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})):o(i)},multiline:!0,autoAdjustHeight:!0,underlined:!0,rows:1,value:r||"",styles:{root:{flexGrow:1,width:"100%"},fieldGroup:{minHeight:a?void 0:"unset"},field:{maxWidth:"unset",width:"100%",minHeight:"1em",resize:a?"vertical":"none"}}})}})},T=function(e){var i=e.onSubmit,t=e.errorOnSubmit,o=e.isLoading,r=e.isSuccess,a=(0,j.BV)().theme,s=(0,b.cI)({defaultValues:{reply:"",topic:void 0}}),d=s.formState.errors,l=s.handleSubmit,u=s.reset,v=l(function(e,i,t){return function(n){var o;if(!t){var r=n.reply,a=n.topic,s=null===(o=null===r||void 0===r?void 0:r.trim)||void 0===o?void 0:o.call(r);s?i({reply:s,topic:a}):e("reply",{type:"required"})}}}(s.setError,i,o));return(0,f.useEffect)((function(){r&&u()}),[r,u]),(0,n.jsx)(b.RV,Object.assign({},s,{children:(0,n.jsx)("form",Object.assign({id:"timeline-message-form-new",noValidate:!0,onSubmit:v,style:{display:"flex",alignItems:"center",justifyContent:"center",borderTop:"1px solid ".concat((0,j.bu)(a.palette.neutralDark,.15))}},{children:(0,n.jsxs)(c.K,Object.assign({horizontalAlign:"stretch",tokens:{padding:"1% 1em 0 1em",maxWidth:"660px"},styles:{root:{width:"100%"}}},{children:[(0,n.jsx)(S,{isLoading:o}),(0,n.jsx)(L,{isLoading:o}),(0,n.jsx)(x,{error:t,formErrors:d})]}))}))}))},D=function(e){var i=e.reportNumber,t=(0,p.B)({mutationKey:[h.CY]}),o=(0,g.mT)(),r=o.isLoading,a=o.mutate,s=o.error,d=o.isSuccess;if(!i)return null;var l=t>0;return(0,n.jsx)(T,{isLoading:r||l,errorOnSubmit:s,onSubmit:function(e){if(!e.reply)throw new Error("Reply is required");a({body:e.reply,topicList:e.topic?[e.topic]:void 0,reportNumber:i})},isSuccess:d})},R=function(e){return"Enter"===e.key||" "===e.key||"ArrowRight"===e.key},I=t(84941),B=t(31371),N=t(66312),M=t(26930),V=t(8072),P=t(88055),F=function(e){var i=e.name,t=e.newValue,o=e.oldValue,r="status"===i,a=function(e){var i,t=e&&(null===(i=P.J[e])||void 0===i?void 0:i.displayName);return r&&t?(0,n.jsx)(V.M,{children:t}):e};return[{isBold:!0,text:(0,C.upperFirst)(i)||""},{text:i&&o?"changed from":""},{isBold:!r,text:a(o)},{text:i&&o?"":"changed"},{text:t&&"to"},{isBold:!r,text:a(t)}].filter((function(e){return e.text}))},A=function(e){var i=e.activityTime,t=e.isDataLoaded,o=void 0===t||t,r=e.name,a=e.newValue,s=e.oldValue;return(0,n.jsx)(M.ProgressTimelineItem,{date:i,iconName:"FieldChanged",isDataLoaded:!!o,message:F({name:r,newValue:a,oldValue:s})})},E=t(74165),q=t(93433),W=t(29388),z=t(56404),U=function(e){var i=(0,I.Q)(null===e||void 0===e?void 0:e.senderName,!1);return Object.assign(Object.assign({},e),{author:{name:null===e||void 0===e?void 0:e.senderName,initials:i},isDataLoaded:!0,date:null===e||void 0===e?void 0:e.createdOn,message:null===e||void 0===e?void 0:e.body,isRead:null===e||void 0===e?void 0:e.read})},K=function(e,i){var t;return(null===e||void 0===e?void 0:e.isLoading)?[{author:{},isDataLoaded:!1}]:function(e,i,t){var n=i.isFetchingNextPage,o=i.isFetchingPreviousPage,r=i.isPlaceholderData,a=(0,q.Z)(e);return n&&(a=(0,C.concat)([t],a)),(o||r)&&(a=(0,C.concat)(a,[t])),a}((0,C.flatten)(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.pages).filter((function(e){return e.id!==i})).reverse().map(U),e,{author:{},isDataLoaded:!1})},G=function(e){var i,t,o=e.conversation,r=(0,k.JA)(null===o||void 0===o?void 0:o.id),a=r.data,s=(0,k.kc)("".concat((0,C.toUpper)(null===o||void 0===o?void 0:o.id))),d=(0,k.em)(null===o||void 0===o?void 0:o.id,{orderBy:{key:"createdOn",ascending:!1}}),l=K(d,null===(i=null===o||void 0===o?void 0:o.firstMessage)||void 0===i?void 0:i.id),c=(0,k.T7)().mutateAsync,u=(0,k.UF)().mutateAsync,v=(0,k.Ki)(null===o||void 0===o?void 0:o.id),m=v.mutateAsync,g=v.isLoading,p=(0,k.fI)(null===o||void 0===o?void 0:o.id),h=p.mutateAsync,f=p.isLoading,b=(0,k.vn)().mutateAsync;return(0,n.jsx)(z.ConversationTimelineItem,Object.assign({},{firstMessage:U(a),id:null===o||void 0===o?void 0:o.id,isLoadingMarkAsRead:g,isLoadingMarkAsUnread:f,isSubscribed:null===o||void 0===o?void 0:o.isSubscribed,onClickFlagMessage:c,onClickSetSubscribe:u,onClickUnflagAll:b,onMarkRead:m,onMarkUnread:h,replyMessages:l,isRefreshInProgress:d.isLoading||d.isStale,errorMessageOnReply:null===(t=null===s||void 0===s?void 0:s.error)||void 0===t?void 0:t.message},{isDataLoaded:!!o||!r.isLoading,isFlagged:(null===o||void 0===o?void 0:o.isFlagged)||(null===a||void 0===a?void 0:a.isFlagged),onClickLoadMore:d.hasNextPage&&d.fetchNextPage,onReply:function(e){return(0,W.__awaiter)(void 0,void 0,void 0,(0,E.Z)().mark((function i(){return(0,E.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null===o||void 0===o?void 0:o.id){i.next=2;break}return i.abrupt("return",Promise.reject({message:"Please specify a conversation to reply to."}));case 2:if(e.reply){i.next=4;break}return i.abrupt("return",Promise.reject({message:"Please enter a reply."}));case 4:return i.abrupt("return",s.mutateAsync({body:e.reply,conversationId:null===o||void 0===o?void 0:o.id}).then((function(){return Promise.resolve({success:!0})})));case 5:case"end":return i.stop()}}),i)})))},topic:null===o||void 0===o?void 0:o.topic}))},J=t(64421),Z=t(73413),Q=t(67592),H=t(18511),_=function(e){switch(e.topic){case k.Iz.Bounty:return(0,n.jsx)(H.J,{iconName:"Trophy",role:"presentation"});case k.Iz.AutoNotification:return(0,n.jsx)(H.J,{iconName:"Info",role:"presentation"});case k.Iz.EmailCommunication:return(0,n.jsx)(H.J,{iconName:"Mail",role:"presentation"});default:return null}},$=function(e){var i=e.topic;return(0,n.jsxs)(n.Fragment,{children:[(0,Q.Pc)(i)," ",(0,n.jsx)(_,{topic:i})]})},X=function(e){var i=e.body,t=e.senderName,o=e.read,r=e.topicList,a=e.createdOn,s=e.id,d=e.isFlagged,l=e.isResponseRequired,u=(0,g.T7)().mutateAsync,v=(0,g.Ki)(),m=v.mutateAsync,p=v.isLoading,h=(0,g.fI)(),f=h.mutateAsync,b=h.isLoading,j=(0,g.mD)(s).mutateAsync,x=null===r||void 0===r?void 0:r.map((function(e){return(0,n.jsx)($,{topic:e},"topic tag ".concat(e))}));return(0,n.jsxs)(c.K,Object.assign({reversed:!1,horizontal:!0,horizontalAlign:"stretch",tokens:{childrenGap:3},styles:{root:{width:"100%"}}},{children:[(0,n.jsx)(J.t,{styles:{coin:{marginTop:"0.25rem"}},showInitialsUntilImageLoads:!0,text:t}),(0,n.jsx)(Z.M,Object.assign({date:a,isDataLoaded:!0,message:i,author:{initials:t?(0,I.Q)(t,!1):void 0,name:t},isRead:o,topicList:x},{id:s,onClickFlagMessage:u,onMarkRead:m,onMarkUnread:f,isLoadingMarkAsRead:p,isLoadingMarkAsUnread:b,isFlagged:d,onSetResponseRequire:j,isResponseRequired:l}))]}))},Y=function(e){var i=e.file,t="failed"!==(null===i||void 0===i?void 0:i.uploadStatus);return(0,n.jsx)(M.ProgressTimelineItem,{date:null===i||void 0===i?void 0:i.createdOn,iconName:t?"BulkUpload":"FileBug",isDataLoaded:!!i,message:[{text:null===i||void 0===i?void 0:i.name,isBold:!0},{text:t?"":"failed",isBold:!0},{text:t?"was uploaded":"to upload"}],messageType:"completed"===(null===i||void 0===i?void 0:i.uploadStatus)?v.f.success:"failed"===(null===i||void 0===i?void 0:i.uploadStatus)?v.f.error:v.f.info})},ee=t(69969),ie=function(e){var i,t,o,r,a=e.item,s=e.scrollToMe;if(!a)return null;var d=(null===(i=null===a||void 0===a?void 0:a.conversation)||void 0===i?void 0:i.id)||(null===(t=null===a||void 0===a?void 0:a.message)||void 0===t?void 0:t.id)||(null===(o=null===a||void 0===a?void 0:a.file)||void 0===o?void 0:o.id)||(null===(r=null===a||void 0===a?void 0:a.change)||void 0===r?void 0:r.activityTime)||(null===a||void 0===a?void 0:a.key),l=a.conversation,c=a.change,u=a.file,v=a.message,m=a.onRender,g=a.key;return m?m():(0,n.jsx)("div",Object.assign({"data-is-focusable":!0,id:"".concat(d)},{children:(0,n.jsxs)(ee.E,Object.assign({enabled:s},{children:[c&&(0,n.jsx)(A,Object.assign({},c)),u&&(0,n.jsx)(Y,Object.assign({},{file:u})),v&&(0,n.jsx)(X,Object.assign({},v)),l&&(0,n.jsx)(G,Object.assign({},{conversation:l}))]}))}),"".concat(g,"--item"))},te=function(e){var i,t,n=e.changeSet,o=e.activityTime;if(null===n||void 0===n?void 0:n.status)return{change:{oldValue:null===(i=null===n||void 0===n?void 0:n.status)||void 0===i?void 0:i.oldValue,newValue:null===(t=null===n||void 0===n?void 0:n.status)||void 0===t?void 0:t.newValue,name:"status",activityTime:o},date:o}},ne=t(42089),oe=t(90800),re=function(e){var i=e.api,t=i.hasNextPage,r=i.isLoading,a=i.isFetching,s=i.isPreviousData,d=i.isFetchingNextPage,l=i.fetchNextPage,c=(0,f.useCallback)((function(){t&&!d&&l()}),[t,d,l]);return r||d||a||s?(0,n.jsx)(o.q,{label:"Loading..."}):t?(0,n.jsx)(oe.K,Object.assign({onInView:c,options:{threshold:0,delay:300,trackVisibility:!0}},{children:(0,n.jsx)(ne.r,Object.assign({onClick:c},{children:"Load prior conversations and activity"}))})):null},ae=t(85597),se=function(e){var i=e.reportNumber;return{vulnReport:(0,k.Rl)(i),messageList:(0,k.Ui)(i,{orderBy:{key:"createdOn",ascending:!1},filter:{conversationId:{data:"null"}}},{pageLength:25}),convoList:(0,ae.JJ)({filter:{reportNumber:{data:"'".concat(i,"'")}},orderBy:{key:"modifiedOn",ascending:!1}},{enabled:!!i,useQueryOptions:{keepPreviousData:!0}}),fileList:(0,k.Wb)({filter:{reportId:{data:"'".concat(i,"'")}},orderBy:{key:"createdOn",ascending:!1}},{enabled:!!i,pageLength:50,useQueryOptions:{keepPreviousData:!0}})}},de=function(e){var i,t,o,r,a,s,d,l=e.reportNumber,c=e.scrollToConversationID,u=se({reportNumber:l}),v=u.convoList,m=u.fileList,g=u.messageList,p=u.vulnReport;return(0,f.useMemo)((function(){var e,i,t,o,r,a,s,d,u,h,f,b,j,x=null===(t=null===(i=null===(e=g.data)||void 0===e?void 0:e.pages)||void 0===i?void 0:i.flat(1))||void 0===t?void 0:t.filter((function(e){return!e.conversationId})),y=null===(r=null===(o=v.data)||void 0===o?void 0:o.pages)||void 0===r?void 0:r.flat(1),k=null===(s=null===(a=m.data)||void 0===a?void 0:a.pages)||void 0===s?void 0:s.flat(1),L=function(e){var i=(0,C.map)(e,(function(e){return te(e)}));return(0,C.compact)(i)}(null===(d=p.data)||void 0===d?void 0:d.changeLog),O=(0,C.concat)([{date:null===(u=p.data)||void 0===u?void 0:u.createdOn,key:"reportCreated",onRender:function(){var e,i,t=null===(e=p.data)||void 0===e?void 0:e.submittedBy;return(0,n.jsx)(B.ReportCreatedTimelineItem,{author:{initials:(0,I.Q)(t,!1),name:t},date:null===(i=p.data)||void 0===i?void 0:i.createdOn,isDataLoaded:!!l&&!p.isLoading})}},{date:null===(h=p.data)||void 0===h?void 0:h.createdOn,key:"report-description",onRender:function(){var e,i,t,o;return(0,n.jsx)(N.ReportDescriptionTimelineItem,{isDataLoaded:!!l&&!p.isLoading,callstack:null===(e=p.data)||void 0===e?void 0:e.callstack,description:null===(i=p.data)||void 0===i?void 0:i.description,reproductionSteps:null===(t=p.data)||void 0===t?void 0:t.reproductionSteps,abstract:null===(o=p.data)||void 0===o?void 0:o.abstract})}},{key:"report--convo--load-more",date:null===(f=null===y||void 0===y?void 0:y[y.length-1])||void 0===f?void 0:f.createdOn,onRender:function(){return(0,n.jsx)(re,{api:v})}},{key:"report--message--load-more",date:null===(b=null===x||void 0===x?void 0:x[x.length-1])||void 0===b?void 0:b.createdOn,onRender:function(){return(0,n.jsx)(re,{api:g})}},{key:"report--file--load-more",date:null===(j=null===k||void 0===k?void 0:k[k.length-1])||void 0===j?void 0:j.createdOn,onRender:function(){return(0,n.jsx)(re,{api:m})}}],(0,C.map)(y,(function(e){return{date:null===e||void 0===e?void 0:e.modifiedOn,conversation:e}})),(0,C.map)(k,(function(e){return{date:null===e||void 0===e?void 0:e.createdOn,file:e}})),(0,C.map)(x,(function(e){return{date:(null===e||void 0===e?void 0:e.createdOn)||(null===e||void 0===e?void 0:e.modifiedOn),message:e}})),L),w=(0,C.orderBy)(O,(function(e){return(null===e||void 0===e?void 0:e.date)?new Date(e.date):void 0}),"asc").map((function(e,i){var t,o,r,a,s,d=(null===(t=null===e||void 0===e?void 0:e.conversation)||void 0===t?void 0:t.id)||(null===(o=null===e||void 0===e?void 0:e.message)||void 0===o?void 0:o.id)||(null===(r=null===e||void 0===e?void 0:e.change)||void 0===r?void 0:r.activityTime)||(null===(a=null===e||void 0===e?void 0:e.file)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.key)||"no-id-index-".concat(i);return(0,n.jsx)(ie,Object.assign({scrollToMe:!!c&&(null===(s=null===e||void 0===e?void 0:e.conversation)||void 0===s?void 0:s.id)===c},{item:e,index:i}),"vuln-report-timeline-item-".concat(d))}));return{timelineChildren:w,timelineItemList:O,fileListFlat:k,messageListFlat:x,convoListFlat:y}}),[g,v,m,null===(i=p.data)||void 0===i?void 0:i.changeLog,null===(t=p.data)||void 0===t?void 0:t.createdOn,null===(o=p.data)||void 0===o?void 0:o.submittedBy,null===(r=p.data)||void 0===r?void 0:r.callstack,null===(a=p.data)||void 0===a?void 0:a.description,null===(s=p.data)||void 0===s?void 0:s.reproductionSteps,null===(d=p.data)||void 0===d?void 0:d.abstract,p.isLoading,l,c])},le=function(e){var i=e.timelineItemList,t=(0,f.useRef)(),o=function(e){var i;return null===(i=(0,C.maxBy)(e,(function(e){var i,t;return new Date((null===(i=e.message)||void 0===i?void 0:i.createdOn)||(null===(t=e.conversation)||void 0===t?void 0:t.modifiedOn)||100).getTime()})))||void 0===i?void 0:i.date}(i);return(0,f.useEffect)((function(){var e;(function(){try{return window.self!==window.top}catch(e){return!0}})()||o&&(null===(e=null===t||void 0===t?void 0:t.current)||void 0===e?void 0:e.scrollIntoView)&&t.current.scrollIntoView({behavior:"smooth",block:"start"})}),[o]),(0,n.jsx)("div",{id:"endOfList",ref:function(e){return t.current=e},style:{marginTop:"0.5em"}})},ce=function(e){var i=e.reportNumber,t=e.scrollToConversationID,u=(0,j.BV)().theme,v=se({reportNumber:i}),g=v.convoList,p=v.fileList,h=v.messageList,f=v.vulnReport,b=!!i&&!!h.data&&!!f.data&&!!p.data&&!!g.data,x=de({reportNumber:i,scrollToConversationID:t}),y=x.timelineChildren,k=x.timelineItemList;return(0,n.jsxs)(o.q,Object.assign({styles:{root:{width:"100%",height:"100%"},dataWrapper:{height:"100%",display:"grid",gridTemplateRows:"6fr auto"}},isDataLoaded:b},{children:[(0,n.jsx)("div",Object.assign({style:{height:"100%",position:"relative"}},{children:(0,n.jsxs)(r.$,Object.assign({initialScrollPosition:999999999999999,styles:{contentContainer:{scrollbarWidth:"thin",scrollbarColor:"".concat(u.palette.neutralPrimaryAlt," ").concat(u.palette.neutralLighter),"::-webkit-scrollbar":{width:"10px"},"::-webkit-scrollbar-track":{background:u.palette.neutralLighter},"::-webkit-scrollbar-track:hover":{background:u.palette.neutralLight},"::-webkit-scrollbar-thumb":{background:u.palette.neutralSecondaryAlt,borderRadius:u.effects.roundedCorner4},":hover::-webkit-scrollbar-thumb":{width:"15px",background:u.palette.themeDarkAlt}}}},{children:[(0,n.jsx)(a.L,Object.assign({stickyPosition:s.L.Header},{children:(0,n.jsx)(m,{convoListError:g.error,vulnReportError:f.error})})),(0,n.jsx)(d.k,Object.assign({shouldResetActiveElementWhenTabFromZone:!0,defaultTabbableElement:"#report-timeline--item--stack > [data-is-focusable]:last-child",direction:l.U.vertical,stopFocusPropagation:!0,shouldEnterInnerZone:R},{children:(0,n.jsx)(c.K,Object.assign({id:"report-timeline--item--stack",tokens:{childrenGap:"0.5em",padding:"0.4em"}},{children:y}))})),(0,n.jsx)(le,{timelineItemList:k})]}),"timeline-scroll-".concat(b))})),(0,n.jsx)(D,{reportNumber:i})]}))}},3722:function(e,i,t){t.d(i,{B:function(){return l}});var n=t(29439),o=t(72791),r=t(73734),a=t(69538),s=t(97413),d=t(96403);function l(e,i,t){var l=(0,r.cb)(e,i,t),c=(0,n.Z)(l,2),u=c[0],v=c[1],m=void 0===v?{}:v,g=(0,d.NL)({context:m.context}),p=g.getMutationCache();return(0,s.$)(o.useCallback((function(e){return p.subscribe(a.V.batchCalls(e))}),[p]),(function(){return g.isMutating(u)}),(function(){return g.isMutating(u)}))}}}]);
//# sourceMappingURL=812.d7893c67.chunk.js.map